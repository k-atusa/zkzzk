<link rel="stylesheet" href="/static/navbar.css">


<nav class="navbar fixed top-0 w-full z-50 px-6 py-4">
	<div class="max-w-7xl mx-auto flex justify-between items-center">
		<a href="/" class="text-xl font-bold text-white">ZKZZK</a>
		<div class="hidden md:flex items-center space-x-4">
			<div class="flex space-x-6">
				<a href="/live"
					class="{% if current_page == 'live' %}text-accent font-medium{% else %}text-white hover:text-accent transition-colors{% endif %}">라이브
					녹화</a>
				<a href="/recordings"
					class="{% if current_page == 'recordings' %}text-accent font-medium{% else %}text-white hover:text-accent transition-colors{% endif %}">녹화
					영상</a>
				<a href="/vod"
					class="{% if current_page == 'vod' %}text-accent font-medium{% else %}text-white hover:text-accent transition-colors{% endif %}">다시보기
					다운로드</a>
			</div>
			<div class="relative" id="profileMenuWrapper">
				<button class="btn-secondary px-3 py-2" type="button" onclick="toggleProfileMenu()">
					<svg class="w-5 h-5 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.121 17.804A3 3 0 017 17h10a3 3 0 011.879.804L21 20H3l2.121-2.196zM15 11a3 3 0 10-6 0 3 3 0 006 0z"></path>
					</svg>
					{{ current_user.username if current_user else '로그인' }}
				</button>
				<div id="profileMenu" class="absolute right-0 mt-2 w-48 rounded-md bg-gray-900 border border-white/10 shadow-lg hidden">
					<a href="/settings" class="block px-4 py-2 text-white hover:text-accent">설정</a>
					{% if current_user and current_user.is_admin %}
					<a href="/admin/users" class="block px-4 py-2 text-white hover:text-accent">관리자 페이지</a>
					{% endif %}
					<form method="POST" action="/logout">
						<button type="submit" class="w-full text-left px-4 py-2 text-white hover:text-accent">로그아웃</button>
					</form>
				</div>
			</div>
		</div>
		<button class="md:hidden text-white" id="mobile-menu-btn">
			<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
				<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16">
				</path>
			</svg>
		</button>
	</div>

	<div class="md:hidden hidden" id="mobile-menu">
		<div class="px-2 pt-2 pb-3 space-y-1">
			<a href="/live"
				class="block px-3 py-2 {% if current_page == 'live' %}text-accent font-medium{% else %}text-white hover:text-accent transition-colors{% endif %}">라이브
				녹화</a>
			<a href="/recordings"
				class="block px-3 py-2 {% if current_page == 'recordings' %}text-accent font-medium{% else %}text-white hover:text-accent transition-colors{% endif %}">녹화
				영상</a>
			<a href="/vod"
				class="block px-3 py-2 {% if current_page == 'vod' %}text-accent font-medium{% else %}text-white hover:text-accent transition-colors{% endif %}">다시보기
				다운로드</a>
			<div class="border-t border-white/10 my-2"></div>
			<a href="/settings" class="block px-3 py-2 text-white hover:text-accent">설정</a>
			{% if current_user and current_user.is_admin %}
			<a href="/admin/users" class="block px-3 py-2 text-white hover:text-accent">관리자 페이지</a>
			{% endif %}
			<form method="POST" action="/logout" class="px-3 py-2">
				<button type="submit" class="text-white hover:text-accent">로그아웃</button>
			</form>
		</div>
	</div>
</nav>


<script>
	// Global variables for live page functionality
	let isCheckingEnabled = true;

	// Mobile menu toggle
	document.getElementById('mobile-menu-btn').addEventListener('click', function () {
		document.getElementById('mobile-menu').classList.toggle('hidden');
	});

	function toggleProfileMenu() {
		const el = document.getElementById('profileMenu');
		if (el) el.classList.toggle('hidden');
	}
</script>