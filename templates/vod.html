<!DOCTYPE html>
<html lang="ko">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>ì¹˜ì§€ì§ ìƒë°©ì†¡ ë‹¤ìš´ë¡œë” - ë‹¤ì‹œë³´ê¸° ë‹¤ìš´ë¡œë“œ</title>
	<script src="https://cdn.tailwindcss.com"></script>
	<script>
		tailwind.config = {
			theme: {
				extend: {
					colors: {
						'accent': 'rgb(113, 243, 166)',
						'accent-dark': 'rgb(89, 194, 133)',
						'accent-light': 'rgb(137, 255, 179)',
					}
				}
			}
		}
	</script>
	<script src="https://unpkg.com/heroicons@2.0.18/24/outline/index.js"></script>
	<style>
		/* ì–´ë‘ìš´ í…Œë§ˆ ë°°ê²½ */
		body {
			background:
				radial-gradient(circle at 20% 20%, rgba(113, 243, 166, 0.15) 0%, transparent 40%),
				radial-gradient(circle at 80% 80%, rgba(34, 197, 94, 0.15) 0%, transparent 40%),
				radial-gradient(circle at 50% 50%, rgba(255, 255, 255, 0.1) 0%, transparent 50%),
				linear-gradient(135deg, #0f0f23 0%, #0a0a0a 100%);
			min-height: 100vh;
			color: #e0e0e0;
		}

		/* ë„¤ë¹„ê²Œì´ì…˜ ë°” */
		.navbar {
			background: rgba(15, 15, 35, 0.4);
			backdrop-filter: blur(20px);
			-webkit-backdrop-filter: blur(20px);
			border-bottom: 1px solid rgba(255, 255, 255, 0.1);
		}

		/* í¼ ìš”ì†Œ */
		.form-input {
			background: rgba(255, 255, 255, 0.08);
			border: 1px solid rgba(255, 255, 255, 0.1);
			color: #e0e0e0;
			border-radius: 12px;
			padding: 0.75rem 1rem;
			width: 100%;
			transition: all 0.3s ease;
		}

		.form-input:focus {
			background: rgba(255, 255, 255, 0.12);
			border-color: rgb(113, 243, 166);
			box-shadow: 0 0 0 3px rgba(113, 243, 166, 0.25);
			color: #ffffff;
			outline: none;
		}

		.form-input::placeholder {
			color: rgba(255, 255, 255, 0.5);
		}

		/* ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
		.btn-primary {
			background: rgba(113, 243, 166, 0.8);
			border: 1px solid rgba(113, 243, 166, 0.3);
			backdrop-filter: blur(10px);
			border-radius: 12px;
			color: #0f0f23;
			font-weight: 600;
			transition: all 0.3s ease;
		}

		.btn-primary:hover {
			background: rgba(113, 243, 166, 1);
			border-color: rgba(113, 243, 166, 0.5);
			transform: translateY(-1px);
			box-shadow: 0 4px 12px rgba(113, 243, 166, 0.3);
		}

		.btn-primary:disabled {
			background: rgba(113, 243, 166, 0.4);
			cursor: not-allowed;
			transform: none;
		}

		/* ë‹¤ìš´ë¡œë“œ ì¹´ë“œ */
		.download-card {
			background: rgba(255, 255, 255, 0.03);
			border: 1px solid rgba(255, 255, 255, 0.1);
			border-radius: 12px;
			transition: all 0.3s ease;
		}

		.download-card:hover {
			background: rgba(255, 255, 255, 0.06);
		}

		/* í”„ë¡œê·¸ë ˆìŠ¤ ë°” */
		.progress-bar {
			background: rgba(255, 255, 255, 0.1);
			border-radius: 8px;
			overflow: hidden;
		}

		.progress-fill {
			background: linear-gradient(90deg, rgb(113, 243, 166), rgb(34, 197, 94));
			height: 100%;
			transition: width 0.3s ease;
		}

		/* í…ìŠ¤íŠ¸ ìƒ‰ìƒ */
		.text-muted {
			color: rgba(255, 255, 255, 0.6);
		}

		.text-accent {
			color: rgb(113, 243, 166);
		}
	</style>
</head>

<body>
	<!-- Navigation Bar -->
	<nav class="navbar fixed top-0 w-full z-50 px-6 py-4">
		<div class="max-w-7xl mx-auto flex justify-between items-center">
			<a href="/" class="text-xl font-bold text-white">ì¹˜ì§€ì§ ìƒë°©ì†¡ ë‹¤ìš´ë¡œë”</a>
			<div class="hidden md:flex space-x-6">
				<a href="/live" class="text-white hover:text-accent transition-colors">ë¼ì´ë¸Œ ë…¹í™”</a>
				<a href="/recordings" class="text-white hover:text-accent transition-colors">ë…¹í™” ì˜ìƒ</a>
				<a href="/vod" class="text-accent font-medium">ë‹¤ì‹œë³´ê¸° ë‹¤ìš´</a>
			</div>
			<button class="md:hidden text-white" id="mobile-menu-btn">
				<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
					<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
				</svg>
			</button>
		</div>
		<!-- Mobile Menu -->
		<div class="md:hidden hidden" id="mobile-menu">
			<div class="px-2 pt-2 pb-3 space-y-1">
				<a href="/live" class="block px-3 py-2 text-white hover:text-accent transition-colors">ë¼ì´ë¸Œ ë…¹í™”</a>
				<a href="/recordings" class="block px-3 py-2 text-white hover:text-accent transition-colors">ë…¹í™” ì˜ìƒ</a>
				<a href="/vod" class="block px-3 py-2 text-accent font-medium">ë‹¤ì‹œë³´ê¸° ë‹¤ìš´</a>
			</div>
		</div>
	</nav>

	<div class="pt-20 pb-8 px-6">
		<div class="max-w-4xl mx-auto">
			<div class="mb-8">
				<h2 class="text-2xl font-bold text-white mb-2">ë‹¤ì‹œë³´ê¸° ë‹¤ìš´ë¡œë“œ</h2>
				<p class="text-muted">ì¹˜ì§€ì§ ë‹¤ì‹œë³´ê¸° URLì„ ì…ë ¥í•˜ë©´ ì˜ìƒì„ ë‹¤ìš´ë¡œë“œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
			</div>

			<form id="vodInfoForm" class="mb-8">
				<div class="mb-4">
					<label for="vodUrl" class="block text-lg font-semibold text-white mb-4">ì¹˜ì§€ì§ ë‹¤ì‹œë³´ê¸° URL</label>
					<div class="flex gap-4">
						<input type="url" class="form-input h-12 flex-1" id="vodUrl" 
							placeholder="https://chzzk.naver.com/video/..." required 
							pattern="https?://chzzk\.naver\.com/video/.*">
						<button type="submit" class="btn-primary h-12 px-6" id="getInfoBtn">
							<svg class="w-5 h-5 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
									d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
							</svg>
							ì •ë³´ ê°€ì ¸ì˜¤ê¸°
						</button>
					</div>
					<p class="text-muted text-sm mt-1">ë‹¤ì‹œë³´ê¸° URLì„ ì…ë ¥í•˜ë©´ ì˜ìƒ ì •ë³´ì™€ ë‹¤ìš´ë¡œë“œ ë§í¬ë¥¼ ì œê³µí•©ë‹ˆë‹¤.</p>
				</div>
			</form>

			<div id="vodInfo" class="hidden">
				<div class="download-card p-6 mb-4">
					<div class="flex justify-between items-start mb-4">
						<div class="flex-1">
							<h3 class="text-lg font-semibold text-white mb-2" id="videoTitle">ì˜ìƒ ì œëª©</h3>
							<div class="text-sm text-muted space-y-1">
								<p id="videoAuthor"></p>
								<p id="videoCategory">ì¹´í…Œê³ ë¦¬: </p>
								<p id="videoSize">íŒŒì¼ í¬ê¸°: </p>
							</div>
						</div>
						<div class="flex flex-col gap-2">
							<a href="#" id="downloadLink" class="btn-primary px-4 py-2 text-sm" target="_blank">
								<svg class="w-4 h-4 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
									<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
										d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
								</svg>
								ë‹¤ìš´ë¡œë“œ
							</a>
							<button id="copyUrlBtn" class="bg-gray-600 hover:bg-gray-500 text-white px-4 py-2 rounded-lg text-sm transition-colors">
								<svg class="w-4 h-4 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
									<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
										d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
								</svg>
								URL ë³µì‚¬
							</button>
						</div>
					</div>
					<div class="bg-gray-800 rounded-lg p-3">
						<p class="text-xs text-muted mb-2">ë‹¤ìš´ë¡œë“œ URL:</p>
						<div class="flex gap-2">
							<input type="text" id="streamUrl" class="form-input text-xs flex-1" readonly>
							<button id="copyStreamUrlBtn" class="bg-gray-600 hover:bg-gray-500 text-white px-3 py-1 rounded text-xs transition-colors">
								ë³µì‚¬
							</button>
						</div>
					</div>
				</div>
			</div>

			<div id="usageInfo" class="mt-8">
				<div class="download-card p-6">
					<h3 class="text-lg font-semibold text-white mb-4">ì‚¬ìš© ë°©ë²•</h3>
					<div class="text-sm text-muted space-y-2">
						<p>1. ì¹˜ì§€ì§ ë‹¤ì‹œë³´ê¸° URLì„ ì…ë ¥í•˜ê³  "ì •ë³´ ê°€ì ¸ì˜¤ê¸°" ë²„íŠ¼ì„ í´ë¦­í•©ë‹ˆë‹¤.</p>
						<p>2. ì˜ìƒ ì •ë³´ì™€ ë‹¤ìš´ë¡œë“œ ë§í¬ê°€ í‘œì‹œë©ë‹ˆë‹¤.</p>
						<p>3. "ë‹¤ìš´ë¡œë“œ" ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ ë¸Œë¼ìš°ì €ì—ì„œ ì§ì ‘ ë‹¤ìš´ë¡œë“œí•˜ê±°ë‚˜,</p>
						<p>4. "URL ë³µì‚¬" ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ ë‹¤ìš´ë¡œë“œ ë§í¬ë¥¼ ë³µì‚¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
						<p class="text-accent mt-4">ğŸ’¡ íŒ: ë‹¤ìš´ë¡œë“œ ë§í¬ëŠ” ì¼ì • ì‹œê°„ í›„ ë§Œë£Œë  ìˆ˜ ìˆìœ¼ë‹ˆ ë¹ ë¥´ê²Œ ì‚¬ìš©í•˜ì„¸ìš”.</p>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- Custom JavaScript -->
	<script>
		// Mobile menu toggle
		document.getElementById('mobile-menu-btn').addEventListener('click', function () {
			document.getElementById('mobile-menu').classList.toggle('hidden');
		});

		// VOD ì •ë³´ ê°€ì ¸ì˜¤ê¸° í¼ ì²˜ë¦¬
		document.getElementById('vodInfoForm').addEventListener('submit', async (e) => {
			e.preventDefault();
			const vodUrl = document.getElementById('vodUrl').value;
			const getInfoBtn = document.getElementById('getInfoBtn');
			const vodInfoDiv = document.getElementById('vodInfo');

			try {
				getInfoBtn.disabled = true;
				getInfoBtn.innerHTML = `
					<svg class="w-5 h-5 inline mr-2 animate-spin" fill="none" stroke="currentColor" viewBox="0 0 24 24">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
					</svg>
					ì²˜ë¦¬ ì¤‘...
				`;

				const response = await fetch('/get_vod_info', {
					method: 'POST',
					headers: {
						'Content-Type': 'application/json',
					},
					body: JSON.stringify({ vod_url: vodUrl })
				});

				const data = await response.json();

				if (data.status === 'success') {
					// VOD ì •ë³´ í‘œì‹œ
					document.getElementById('videoTitle').textContent = data.video_info.title;
					document.getElementById('videoAuthor').textContent = `${data.video_info.author}`;
					document.getElementById('videoCategory').textContent = `ì¹´í…Œê³ ë¦¬: ${data.video_info.category}`;
					document.getElementById('videoSize').textContent = `íŒŒì¼ í¬ê¸°: ${data.file_size_mb} MB`;
					
					// ë‹¤ìš´ë¡œë“œ ë§í¬ ì„¤ì •
					const downloadLink = document.getElementById('downloadLink');
					downloadLink.href = data.stream_url;
					downloadLink.download = `${data.video_info.title}.mp4`;
					
					// ìŠ¤íŠ¸ë¦¼ URL í‘œì‹œ
					document.getElementById('streamUrl').value = data.stream_url;
					
					vodInfoDiv.classList.remove('hidden');
				} else {
					alert(data.message);
				}
			} catch (error) {
				console.error('Error:', error);
				alert('VOD ì •ë³´ ê°€ì ¸ì˜¤ê¸° ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
			} finally {
				getInfoBtn.disabled = false;
				getInfoBtn.innerHTML = `
					<svg class="w-5 h-5 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
							d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
					</svg>
					ì •ë³´ ê°€ì ¸ì˜¤ê¸°
				`;
			}
		});

		// URL ë³µì‚¬ ê¸°ëŠ¥
		document.getElementById('copyUrlBtn').addEventListener('click', async () => {
			const streamUrl = document.getElementById('streamUrl').value;
			try {
				await navigator.clipboard.writeText(streamUrl);
				alert('ë‹¤ìš´ë¡œë“œ URLì´ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.');
			} catch (error) {
				console.error('Error copying URL:', error);
				alert('URL ë³µì‚¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
			}
		});

		document.getElementById('copyStreamUrlBtn').addEventListener('click', async () => {
			const streamUrl = document.getElementById('streamUrl').value;
			try {
				await navigator.clipboard.writeText(streamUrl);
				alert('ìŠ¤íŠ¸ë¦¼ URLì´ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.');
			} catch (error) {
				console.error('Error copying stream URL:', error);
				alert('ìŠ¤íŠ¸ë¦¼ URL ë³µì‚¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
			}
		});


	</script>
</body>

</html> 